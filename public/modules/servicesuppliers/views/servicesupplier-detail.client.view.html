<div class="service-supplier-header-container">
    <div class="pull-right create-job-button-container" data-ng-show="authentication.user">
        <a ui-sref="jobs.create({ servicesupplierId: servicesupplier._id })" class="btn btn-primary">Crear trabajo</a>
    </div>
    <h1>Detalles</h1>
</div>
<br>
<div class="thumbnail flex-display" ng-cloak>

    <div class="service-supplier-img-container">
        <img src="/images/user.jpg" alt="" class="service-supplier-img">
    </div>
    <div class="service-supplier-details-container">
        <div class="caption-full">
            <strong class="pull-right">
                <!--<ng-pluralize count="jobs.length"
                              when="{'0': '0 trabajos',
                                     '1': '{{jobs.length}} trabajo',
                                     'other': '{{jobs.length}} trabajos'}">
                </ng-pluralize>-->
                <p>
                    <span class="label label-success">1 Terminados</span>
                    <span class="label label-primary">1 En Progreso</span>
                    <span class="label label-danger">0 Abandonados</span>
                </p>
            </strong>
            <small class="list-group-item-text">
                Miembro desde
                <span data-ng-bind="servicesupplier.registration_date | date:'shortDate'"></span>
            </small>
            <h4><a href="">{{servicesupplier.display_name}}</a></h4>
            <p>{{servicesupplier.description}}</p>

            <div ng-show="authentication.user">
                <strong>Email: </strong> {{servicesupplier.email}}<br>
                <strong>Tel&#233;fono: </strong> {{servicesupplier.phone_number}}<br><br>
            </div>

            <div ng-show="!authentication.user">
                <strong>Email: </strong> ...<br>
                <strong>Tel&#233;fono: </strong> ...<br><br>
            </div>

            <label class="control-label">Servicios</label>
            <div data-ng-repeat="servicesubcategory in servicesupplier.services">
                - {{servicesubcategory.name}}<br>
            </div>
        </div>
        <div class="ratings service-supplier-rating-count">
            <p class="pull-right">
                <ng-pluralize count="reviews.length"
                              when="{'0': '0 comentarios',
                                     '1': '{{reviews.length}} comentario',
                                     'other': '{{reviews.length}} comentarios'}">
                </ng-pluralize>
            </p>

            <p data-ng-show="jobs.length">
                <uib-rating data-ng-model="servicesupplier.overall_rating" max="max" readonly="true" on-hover="hoveringOver(value)" on-leave="overStar=null"></uib-rating>
                <span>{{servicesupplier.overall_rating}}</span> (promedio)
            </p>
        </div>

    </div>

</div>

<div class="service-supplier-header-container">
    <div class="pull-right leave-review-button-container" data-ng-show="authentication.user">
        <a data-ng-click="openReviewModal()" class="btn btn-success">Deja un comentario</a>
    </div>
    <div class="reviews-label-container">Comentarios recientes</div>
</div>
<br>
<div class="well" ng-cloak>
    <div class="row service-supplier-review-list" data-ng-repeat="job in jobs | filter: jobHasReview | limitTo:5 | orderBy: '-review[0].created'">
        <div class="col-md-12">
            <br>
            <p>{{job.user.displayName || authentication.user.displayName}}
                <span class="pull-right">
                    <span class="glyphicon glyphicon-time"></span>
                    {{ job.review[0].created | date: 'medium' }}
                </span>
            </p>
            <p>
                <uib-rating data-ng-model="job.review[0].ratingsAvg" max="max" readonly="true" on-hover="hoveringOver(value)" on-leave="overStar=null"></uib-rating>
                <span>({{job.review[0].ratingsAvg}})</span>
            </p>
            <p>{{job.review[0].comment}}</p>
        </div>
        <hr>
    </div>
</div>
