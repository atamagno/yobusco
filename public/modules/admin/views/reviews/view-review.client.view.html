<section data-ng-controller="ReviewsController" data-ng-init="findOne()">
	<alert type="{{alerts.type}}" close="alerts.close()" data-ng-show="alerts.visible" class="custom-alert">{{alerts.msg}}</alert>
	<div class="admin-page-header">
		<h1 data-ng-bind="review.job.name"></h1>
	</div>

	<h3>Details</h3>
	<ul class="job-detail-list-container">
		<li><strong>Posted on: </strong>{{review.created | date: 'medium'}}</li>
		<li><strong>Service Supplier: </strong>{{review.service_supplier.display_name}}</li>
		<li><strong>Job: </strong>{{review.job.name}}</li>
		<li><strong>User: </strong>{{review.user.displayName}}</li>
		<li><strong>Services: </strong><span data-ng-repeat="service in review.services">[{{service.name}}] </span></li>
	</ul>

	<label class="control-label">Ratings</label>
	<div data-ng-repeat="rating in review.ratings">
		{{rating.type.name}}
		<div class="pull-right">
			<rating ng-model="rating.rate" max="5" class="review-rating-selector" readonly="true"></rating>{{rating.rate}} Stars
		</div>
	</div>

	<br>

	<label class="control-label">Comment</label>
	<p>{{review.comment}}</p>

	<div class="pull-right">
		<a class="btn btn-primary" ui-sref="admin.editReview({ reviewId: review._id })">
			<i class="glyphicon glyphicon-edit"></i>
		</a>
		<a class="btn btn-primary" data-ng-click="openDeleteModal();">
			<i class="glyphicon glyphicon-trash"></i>
		</a>
	</div>

	<script type="text/ng-template" id="deleteReviewModal">
		<div class="modal-header">
			<h3 class="modal-title">Delete Review</h3>
		</div>
		<div class="modal-body">
			Are you sure you want to delete this review?
		</div>
		<div class="modal-footer">
			<button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
			<button class="btn btn-default" type="button" ng-click="cancel()">Cancel</button>
		</div>
	</script>

</section>
